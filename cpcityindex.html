<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ çš„æ€§æ ¼ä¸å“ªä¸ªåŸå¸‚æ˜¯å¤©é€‰CP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body {
            background-color: #f5f8ff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .app-container {
            width: 100%;
            max-width: 900px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* é¦–é¡µæ ·å¼ */
        .home-page {
            padding: 40px 30px;
            text-align: center;
        }

        .home-title {
            font-size: 28px;
            color: #23b8d8;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .divider {
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #23b8d8, #36d399);
            margin: 0 auto 30px;
            border-radius: 2px;
        }

        .icon-box {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #23b8d8, #36d399);
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 30px;
        }

        .icon-box svg {
            width: 50px;
            height: 50px;
            fill: #ffffff;
        }

        .home-desc {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 40px;
            text-align: left;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature-card {
            background-color: #f0f7ff;
            border-radius: 12px;
            padding: 25px 15px;
            text-align: center;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 15px;
        }

        .feature-icon.blue {
            background-color: rgba(35, 184, 216, 0.1);
            color: #23b8d8;
        }

        .feature-icon.green {
            background-color: rgba(54, 211, 153, 0.1);
            color: #36d399;
        }

        .feature-title {
            font-size: 22px;
            color: #23b8d8;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .feature-title.green {
            color: #36d399;
        }

        .feature-subtitle {
            font-size: 14px;
            color: #6b7280;
        }

        .start-btn {
            width: 100%;
            max-width: 500px;
            height: 50px;
            background: linear-gradient(90deg, #23b8d8, #36d399);
            color: #ffffff;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .start-btn:hover {
            transform: translateY(-2px);
        }

        /* æµ‹è¯•é¡µæ ·å¼ */
        .test-page {
            padding: 30px;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .test-progress-text {
            font-size: 14px;
            color: #6b7280;
        }

        .test-progress-percent {
            font-size: 14px;
            color: #23b8d8;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #e2e8f0;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #23b8d8, #36d399);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .question-title {
            font-size: 24px;
            color: #2d3748;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .options-list {
            margin-bottom: 40px;
        }

        .option-item {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-item:hover {
            border-color: #23b8d8;
            background-color: #f0f7ff;
        }

        .option-item.selected {
            border-color: #23b8d8;
            background-color: #f0f7ff;
        }

        .option-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #cbd5e0;
            border-radius: 50%;
            display: inline-block;
            margin-right: 12px;
            vertical-align: middle;
            position: relative;
        }

        .option-item.selected .option-radio {
            border-color: #23b8d8;
        }

        .option-item.selected .option-radio::after {
            content: '';
            width: 10px;
            height: 10px;
            background-color: #23b8d8;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .option-text {
            font-size: 16px;
            color: #4a5568;
            vertical-align: middle;
        }

        .test-footer {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .test-btn {
            flex: 1;
            height: 50px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .test-btn.prev {
            background-color: #f7fafc;
            color: #a0aec0;
            cursor: not-allowed;
        }

        .test-btn.prev.active {
            background-color: #f7fafc;
            color: #4a5568;
            cursor: pointer;
        }

        .test-btn.next {
            background: linear-gradient(90deg, #23b8d8, #36d399);
            color: #ffffff;
        }

        /* ç»“æœé¡µæ ·å¼ */
        .result-page {
            padding: 30px;
        }

        .result-title {
            font-size: 24px;
            color: #23b8d8;
            text-align: center;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .result-subtitle {
            font-size: 14px;
            color: #6b7280;
            text-align: center;
            margin-bottom: 30px;
        }

        .result-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 40px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .result-icon-box {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #23b8d8, #36d399);
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px;
        }

        .result-icon-box svg {
            width: 40px;
            height: 40px;
            fill: #ffffff;
        }

        .match-icon {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: #23b8d8;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .match-percent {
            font-size: 48px;
            color: #23b8d8;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .result-city {
            font-size: 28px;
            color: #2d3748;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tag {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .tag.light-blue {
            background-color: rgba(35, 184, 216, 0.1);
            color: #23b8d8;
        }

        .tag.green {
            background-color: rgba(54, 211, 153, 0.1);
            color: #36d399;
        }

        .match-reason {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 20px;
            text-align: left;
        }

        .match-reason-title {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #23b8d8;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .match-reason-text {
            font-size: 15px;
            color: #4a5568;
            line-height: 1.7;
        }

        .other-cities-title {
            font-size: 18px;
            color: #2d3748;
            text-align: center;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .other-cities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .other-city-card {
            background-color: #f7fafc;
            border-radius: 12px;
            padding: 20px;
        }

        .other-city-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .other-city-name {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 18px;
            color: #2d3748;
            font-weight: 600;
        }

        .other-city-match {
            background-color: rgba(54, 211, 153, 0.1);
            color: #36d399;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
        }

        .other-city-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .other-city-desc {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.6;
        }

        .restart-btn {
            width: 100%;
            max-width: 200px;
            height: 40px;
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin: 0 auto;
            transition: all 0.2s;
        }

        .restart-btn:hover {
            background-color: #edf2f7;
        }

        /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
<!-- è¿‡æœŸéªŒè¯è„šæœ¬ï¼ˆæ”¾åœ¨æœ€é¡¶éƒ¨ï¼‰ -->
<script>
(function() {
    const urlParams = new URLSearchParams(window.location.search);
    const expire = urlParams.get('expire');

    if (!expire) {
        document.body.innerHTML = '<div style="text-align:center; margin-top:50px; font-family: sans-serif; color:#23b8d8; font-size:20px;">ğŸ”’ æ— æ•ˆçš„è®¿é—®é“¾æ¥</div>';
        window.stop();
        return;
    }

    const now = Math.floor(Date.now() / 1000);
    const expireTime = parseInt(expire, 10);

    if (isNaN(expireTime) || expireTime <= 0) {
        document.body.innerHTML = '<div style="text-align:center; margin-top:50px; font-family: sans-serif; color:#23b8d8; font-size:20px;">âš ï¸ é“¾æ¥æ ¼å¼é”™è¯¯</div>';
        window.stop();
        return;
    }

    if (now > expireTime) {
        document.body.innerHTML = '<div style="text-align:center; margin-top:50px; font-family: sans-serif; color:#23b8d8; font-size:20px;">â³ æ­¤é“¾æ¥å·²è¿‡æœŸï¼Œè¯·é‡æ–°è´­ä¹°</div>';
        window.stop();
        return;
    }

    // é“¾æ¥æœ‰æ•ˆï¼Œæ·»åŠ å€’è®¡æ—¶æ¡
    const remaining = expireTime - now;
    const remainingMinutes = Math.floor(remaining / 60);
    const remainingSeconds = remaining % 60;

    const timerDiv = document.createElement('div');
    timerDiv.style.position = 'sticky';
    timerDiv.style.top = '0';
    timerDiv.style.backgroundColor = '#e0f2fe';
    timerDiv.style.color = '#0369a1';
    timerDiv.style.padding = '10px';
    timerDiv.style.textAlign = 'center';
    timerDiv.style.fontSize = '14px';
    timerDiv.style.borderBottom = '2px solid #23b8d8';
    timerDiv.style.zIndex = '1000';
    timerDiv.innerHTML = `â° æœ¬é“¾æ¥å‰©ä½™æœ‰æ•ˆæ—¶é—´ï¼š${remainingMinutes}åˆ†${remainingSeconds}ç§’ï¼ˆè¿‡æœŸåé“¾æ¥å°†è‡ªåŠ¨å¤±æ•ˆï¼‰`;

    document.body.prepend(timerDiv);
})();
</script>

<div class="app-container">
    <!-- é¦–é¡µ -->
    <div class="page home-page active" id="homePage">
        <h1 class="home-title">ä½ çš„æ€§æ ¼ä¸å“ªä¸ªåŸå¸‚æ˜¯å¤©é€‰CP</h1>
        <div class="divider"></div>
        <div class="icon-box">
            <svg viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
        </div>
        <div class="home-desc">
            <p>åœ¨å¿«èŠ‚å¥çš„ç”Ÿæ´»é‡Œï¼Œæ€»æœ‰ä¸€åº§åŸå¸‚ä¸ä½ çš„çµé­‚åŒé¢‘ã€‚åœ¨è¿™é‡Œï¼Œè¯—æ„ä¸å¿…è¿œå¯»â€”â€”å¯èƒ½æ˜¯æ­å·çš„çƒŸé›¨ç”»æ¡¥ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆéƒ½çš„å·´é€‚åˆåã€‚</p>
            <br>
            <p>å®Œæˆè¿™ä»½æµ‹è¯•ï¼Œå‘ç°è®©ä½ çœŸæ­£æ”¾æ¾ã€æ‰¾åˆ°å½’å±æ„Ÿçš„å¿ƒçµåŸå¸‚ã€‚</p>
            <br>
            <p>é‡è§ä¸­å›½æœ€é€‚åˆä½ çš„é‚£åº§åŸï¼Œä»æ­¤æ—…é€”æœ‰æ–¹å‘ï¼Œå¿ƒå®‰æ˜¯å½’å¤„ã€‚</p>
        </div>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon blue">
                    <span>â“</span>
                </div>
                <h3 class="feature-title">30é“ç²¾é€‰é¢˜ç›®</h3>
                <p class="feature-subtitle">è¦†ç›–ç”Ÿæ´»å„æ–¹é¢</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon green">
                    <span>â±</span>
                </div>
                <h3 class="feature-title green">çº¦5åˆ†é’Ÿå®Œæˆ</h3>
                <p class="feature-subtitle">è½»æ¾å¿«é€Ÿæµ‹è¯•</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon blue">
                    <span>â¤</span>
                </div>
                <h3 class="feature-title">16åº§åŸå¸‚åŒ¹é…</h3>
                <p class="feature-subtitle">å‘ç°ä½ çš„å¤©é€‰ä¹‹åŸ</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon green">
                    <span>ğŸ¤–</span>
                </div>
                <h3 class="feature-title green">æ™ºèƒ½åŒ¹é…ç®—æ³•</h3>
                <p class="feature-subtitle">åŸºäºå…­ç»´æ€§æ ¼æ¨¡å‹</p>
            </div>
        </div>
        <button class="start-btn" id="startTestBtn">å¼€å§‹æµ‹è¯•</button>
    </div>

    <!-- æµ‹è¯•é¡µ -->
    <div class="page test-page" id="testPage">
        <div class="test-header">
            <div class="test-progress-text" id="testProgressText">é—®é¢˜ 1 / 30</div>
            <div class="test-progress-percent" id="testProgressPercent">3%</div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 3%"></div>
        </div>
        <h2 class="question-title" id="questionTitle"></h2>
        <div class="options-list" id="optionsList"></div>
        <div class="test-footer">
            <button class="test-btn prev" id="prevBtn">ä¸Šä¸€é¢˜</button>
            <button class="test-btn next" id="nextBtn">ä¸‹ä¸€é¢˜</button>
        </div>
    </div>

    <!-- ç»“æœé¡µ -->
    <div class="page result-page" id="resultPage">
        <h2 class="result-title">ä½ çš„å¤©é€‰ä¹‹åŸ</h2>
        <p class="result-subtitle">å‘ç°ä¸ä½ çµé­‚æœ€å¥‘åˆçš„åŸå¸‚</p>
        <div class="result-card">
            <div class="result-icon-box">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
            </div>
            <div class="match-icon">
                <span>âœˆï¸</span>
                <span>åŒ¹é…åº¦</span>
            </div>
            <div class="match-percent" id="mainMatchPercent">0%</div>
            <h3 class="result-city" id="mainCityName">ğŸ“ åŠ è½½ä¸­...</h3>
            <div class="tags" id="mainCityTags"></div>
            <div class="match-reason" id="matchReason">
                <div class="match-reason-title">
                    <span>âœˆï¸</span>
                    <span>åŒ¹é…ç†ç”±</span>
                </div>
                <p class="match-reason-text" id="matchReasonText"></p>
            </div>
        </div>
        <h3 class="other-cities-title">å…¶ä»–é€‚åˆä½ çš„åŸå¸‚</h3>
        <div class="other-cities-grid" id="otherCitiesContainer"></div>
        <button class="restart-btn" id="restartBtn">
            <span>ğŸ”„</span>
            <span>é‡æ–°æµ‹è¯•</span>
        </button>
    </div>
</div>

<script>
    // ---------- 30é“é¢˜ç›®æ•°æ® ----------
    const questions = [
        { text: "ä½ æ›´åçˆ±å“ªç§åŸå¸‚æ°›å›´ï¼Ÿ", options: ["å……æ»¡æ´»åŠ›ä¸åˆ›æ–°", "å®é™å®‰é€¸æœ‰åº•è•´", "ç°ä»£ä¸ä¼ ç»Ÿäº¤è", "è‡ªç„¶é£å…‰ç¯ç»•"] },
        { text: "ä½ å¯¹å†å²æ–‡åŒ–çš„å…´è¶£ç¨‹åº¦ï¼Ÿ", options: ["éå¸¸ç€è¿·ï¼Œå–œæ¬¢æ¢ç´¢å¤è¿¹", "å¶å°”äº†è§£ï¼Œéšç¼˜", "ä¸€èˆ¬ï¼Œæ›´å…³æ³¨ç°ä»£", "ä¸å¤ªæ„Ÿå…´è¶£"] },
        { text: "ä½ æ›´å–œæ¬¢å“ªç§è‡ªç„¶é£å…‰ï¼Ÿ", options: ["æµ·æ»¨/æ¹–æ³Š", "å±±å·/æ£®æ—", "ç”°å›­/ä¹¡æ‘", "éƒ½å¸‚å…¬å›­/ç»¿åœ°"] },
        { text: "ä½ å¯¹ç”Ÿæ´»èŠ‚å¥çš„åå¥½ï¼Ÿ", options: ["å¿«èŠ‚å¥ï¼Œé«˜æ•ˆå……å®", "é€‚ä¸­ï¼Œå¼ å¼›æœ‰åº¦", "æ…¢èŠ‚å¥ï¼Œæ‚ é—²è‡ªåœ¨", "éšå¿ƒæ‰€æ¬²ï¼Œçœ‹å¿ƒæƒ…"] },
        { text: "ä½ å¯¹ç¾é£Ÿçš„æ€åº¦ï¼Ÿ", options: ["çƒ­çˆ±æ¢ç´¢å„ç§ç¾é£Ÿ", "å–œæ¬¢æœ¬åœ°ç‰¹è‰²å°åƒ", "å®¶å¸¸ä¾¿é¥­å°±å¾ˆå¥½", "å¯¹åƒä¸å¤ªè®²ç©¶"] },
        { text: "ä½ å–œæ¬¢ä»€ä¹ˆæ ·çš„ç¤¾äº¤åœºåˆï¼Ÿ", options: ["å¤§å‹èšä¼šï¼Œè®¤è¯†æ–°æœ‹å‹", "ä¸‰äº”å¥½å‹å°èš", "ä¸€å¯¹ä¸€æ·±åº¦äº¤æµ", "ç‹¬å¤„ï¼Œäº«å—å®‰é™"] },
        { text: "ä½ å¯¹æ°”å€™çš„åå¥½ï¼Ÿ", options: ["å››å­£åˆ†æ˜", "æ¸©æš–æ¹¿æ¶¦", "å¹²ç‡¥å‡‰çˆ½", "æ¸©å’Œèˆ’é€‚"] },
        { text: "ä½ å¯¹äº¤é€šä¾¿åˆ©æ€§çš„è¦æ±‚ï¼Ÿ", options: ["åœ°é“å…¬äº¤å‘è¾¾", "è‡ªé©¾å‡ºè¡Œæ–¹ä¾¿", "éª‘è¡Œå‹å¥½", "æ— æ‰€è°“"] },
        { text: "ä½ æ›´æ„¿æ„ä½åœ¨ï¼Ÿ", options: ["å¸‚ä¸­å¿ƒï¼Œç¹åçƒ­é—¹", "è¿‘éƒŠï¼Œå®‰é™å®œå±…", "é£æ™¯åŒºé™„è¿‘", "æ— æ‰€è°“"] },
        { text: "ä½ å¯¹ç§‘æŠ€åˆ›æ–°çš„æ€åº¦ï¼Ÿ", options: ["çƒ­è¡·è¿½é€æ–°ç§‘æŠ€", "å®ç”¨ä¸»ä¹‰ï¼Œå¤Ÿç”¨å°±å¥½", "ä¸å¤ªå…³æ³¨", "æœ‰ç‚¹æ’æ–¥"] },
        { text: "ä½ å–œæ¬¢ä»€ä¹ˆæ ·çš„å¤œç”Ÿæ´»ï¼Ÿ", options: ["é…’å§å¤œå¸‚ï¼Œè¶Šå¤œè¶Šå—¨", "å’–å•¡é¦†ä¹¦åº—ï¼Œå®‰é™æ”¾æ¾", "åœ¨å®¶è¿½å‰§ä¼‘æ¯", "å¤œè·‘æ•£æ­¥"] },
        { text: "ä½ å¯¹æˆ¿ä»·çš„æ€åº¦ï¼Ÿ", options: ["èƒ½æ¥å—é«˜æˆ¿ä»·ï¼Œè¿½æ±‚åœ°æ®µ", "å¸Œæœ›æ€§ä»·æ¯”é«˜", "åé‡ä½æˆ¿ä»·ï¼Œå‡è½»å‹åŠ›", "ç§Ÿæˆ¿ä¸ºä¸»ï¼Œä¸ä¹°æˆ¿"] },
        { text: "ä½ å¯¹æ•™è‚²çš„é‡è§†ç¨‹åº¦ï¼Ÿ", options: ["éå¸¸é‡è¦ï¼Œå…³æ³¨å­¦åŒº", "æ¯”è¾ƒé‡è¦ï¼Œæœ‰èµ„æºå°±å¥½", "ä¸€èˆ¬ï¼Œéšç¼˜", "ä¸å¤ªè€ƒè™‘"] },
        { text: "ä½ æ›´å–œæ¬¢å“ªç§è´­ç‰©æ–¹å¼ï¼Ÿ", options: ["çº¿ä¸Šè´­ç‰©", "å¤§å‹å•†åœº", "ä¼ ç»Ÿå¸‚é›†", "ç‰¹è‰²å°åº—"] },
        { text: "ä½ å¯¹åŸå¸‚ç»¿åŒ–çš„è¦æ±‚ï¼Ÿ", options: ["è¶Šé«˜è¶Šå¥½ï¼Œæ£®æ—åŸå¸‚", "å…¬å›­è¶³å¤Ÿå³å¯", "æœ‰åŸºæœ¬ç»¿åŒ–å°±è¡Œ", "ä¸å¤ªåœ¨æ„"] },
        { text: "ä½ å¯¹è¿åŠ¨ä¼‘é—²çš„åå¥½ï¼Ÿ", options: ["ç™»å±±å¾’æ­¥", "æ¸¸æ³³å†²æµª", "å¥èº«æˆ¿", "æ•£æ­¥å†¥æƒ³"] },
        { text: "ä½ å¯¹è‰ºæœ¯çš„å…´è¶£ï¼Ÿ", options: ["éå¸¸çƒ­çˆ±ï¼Œå¸¸çœ‹å±•", "æœ‰å…´è¶£ï¼Œå¶å°”å‚åŠ ", "ä¸€èˆ¬ï¼Œä¸å¤ªæ‡‚", "æ²¡ä»€ä¹ˆå…´è¶£"] },
        { text: "ä½ å¯¹å®—æ•™ä¿¡ä»°/æ°‘ä¿—çš„æ€åº¦ï¼Ÿ", options: ["å°Šé‡å¹¶å¥½å¥‡", "äº†è§£å³å¯", "ä¸æ’æ–¥", "ä¸å¤ªå…³å¿ƒ"] },
        { text: "ä½ æ›´å–œæ¬¢å“ªç§å±…ä½ç¯å¢ƒï¼Ÿ", options: ["é«˜å±‚å…¬å¯“ï¼Œè§†é‡å¼€é˜”", "ä½å±‚æ´‹æˆ¿ï¼Œäº²è¿‘åœ°é¢", "ç‹¬æ ‹åˆ«å¢…ï¼Œç§å¯†æ€§å¥½", "è€å°åŒºï¼Œæœ‰çƒŸç«æ°”"] },
        { text: "ä½ å¯¹åŸå¸‚å™ªéŸ³çš„å®¹å¿åº¦ï¼Ÿ", options: ["å®Œå…¨ä¸ä»‹æ„ï¼Œçƒ­é—¹å¥½", "å¯ä»¥æ¥å—ï¼Œä¹ æƒ¯å°±å¥½", "æ¯”è¾ƒæ•æ„Ÿï¼Œéœ€è¦å®‰é™", "å¿…é¡»ç»å¯¹å®‰é™"] },
        { text: "ä½ å¯¹å·¥ä½œæœºä¼šçš„çœ‹é‡ï¼Ÿ", options: ["é¦–è¦å› ç´ ï¼Œæ„¿æ„ä¸ºæœºä¼šå¥”æ³¢", "é‡è¦ä½†éå”¯ä¸€", "å·®ä¸å¤šå°±è¡Œ", "å¯ä»¥è¿œç¨‹å·¥ä½œ"] },
        { text: "ä½ å¯¹å½“åœ°äººçš„æ€§æ ¼åå¥½ï¼Ÿ", options: ["çƒ­æƒ…ç›´çˆ½", "æ¸©å’Œå†…æ•›", "å¼€æ”¾åŒ…å®¹", "ç²¾æ˜åŠ¡å®"] },
        { text: "ä½ å¯¹åŸå¸‚å›½é™…åŒ–ç¨‹åº¦çš„è¦æ±‚ï¼Ÿ", options: ["è¶Šé«˜è¶Šå¥½ï¼Œå¤šå…ƒæ–‡åŒ–", "æœ‰ä¸€å®šå›½é™…æ°›å›´å³å¯", "æœ¬åœŸç‰¹è‰²æ›´é‡è¦", "æ— æ‰€è°“"] },
        { text: "ä½ å¯¹ç©ºæ°”è´¨é‡çš„é‡è§†ï¼Ÿ", options: ["å¿…é¡»ä¼˜è‰¯ï¼Œå½±å“å¥åº·", "å¸Œæœ›è¾ƒå¥½", "å¶å°”å·®ä¹Ÿèƒ½æ¥å—", "ä¸å¤ªæ•æ„Ÿ"] },
        { text: "ä½ å¯¹å‘¨æœ«æ´»åŠ¨çš„åå¥½ï¼Ÿ", options: ["æˆ·å¤–æ¢é™©", "æ–‡åŒ–å±•è§ˆ", "æœ‹å‹èšé¤", "å®…å®¶ä¼‘æ¯"] },
        { text: "ä½ å¯¹åŸå¸‚æœªæ¥å‘å±•çš„æ€åº¦ï¼Ÿ", options: ["å¸Œæœ›é£é€Ÿå‘å±•ï¼Œæœºé‡å¤š", "å¸Œæœ›ç¨³æ­¥å‘å±•ï¼Œå®œå±…", "ç»´æŒç°çŠ¶å°±å¥½", "æ— æ‰€è°“"] },
        { text: "ä½ å¯¹å½“åœ°ç¾é£Ÿçš„ä¾èµ–ï¼Ÿ", options: ["æ¯é¡¿éƒ½è¦åƒç‰¹è‰²", "å¶å°”å°å°", "è¿˜æ˜¯ä¹ æƒ¯å®¶ä¹¡èœ", "ä¸æŒ‘é£Ÿ"] },
        { text: "ä½ å¯¹åŸå¸‚åœ°æ ‡çš„æ€åº¦ï¼Ÿ", options: ["å¿…é¡»æ‰“å¡", "éšç¼˜çœ‹çœ‹", "ä¸å¤ªåœ¨æ„", "äººå°‘æ‰å»"] },
        { text: "ä½ å¯¹ç©¿è¡£æ‰“æ‰®çš„é£æ ¼ï¼Ÿ", options: ["æ—¶å°šå‰å«", "ç®€çº¦èˆ’é€‚", "ä¼ ç»Ÿä¿å®ˆ", "æ··æ­éšæ€§"] },
        { text: "ä½ å¯¹åŸå¸‚ç¬¬ä¸€å°è±¡æœ€çœ‹é‡ï¼Ÿ", options: ["ç¬¬ä¸€çœ¼çš„æ´»åŠ›", "å†å²æ²‰æ·€æ„Ÿ", "æ•´æ´å¹²å‡€", "è‡ªç„¶é£å…‰"] }
    ];

    // ---------- åŸå¸‚æ•°æ® ----------
    const cities = [
        {
            name: "æˆéƒ½",
            tags: ["èººå¹³å‹", "ç¤¾äº¤å‹", "ç¾é£Ÿå‹"],
            desc: "å·´é€‚çš„æˆéƒ½ï¼Œæ…¢èŠ‚å¥ä¸­äº«å—ç”Ÿæ´»ã€‚ç«é”…ä¸²ä¸²ã€èŒ¶é¦†éº»å°†ï¼Œè¿™é‡Œçš„ç”Ÿæ´»å……æ»¡é—²é€‚ä¸æƒ¬æ„ã€‚é€‚åˆè¿½æ±‚ç”Ÿæ´»å¹³è¡¡ã€çƒ­çˆ±ç¾é£Ÿçš„ä½ ã€‚",
            reason: "ä½ å’Œæˆéƒ½ä¸€æ ·ï¼Œæ‡‚å¾—äº«å—ç”Ÿæ´»ã€çƒ­çˆ±ç¾é£Ÿã€‚æˆéƒ½çš„èŒ¶é¦†æ–‡åŒ–ã€ç«é”…æ°›å›´ã€æ…¢èŠ‚å¥ç”Ÿæ´»ï¼Œä¸ä½ è¿½æ±‚é—²é€‚ã€é‡è§†ç¤¾äº¤çš„æ€§æ ¼é«˜åº¦å¥‘åˆã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥å°½æƒ…ä½“éªŒå·´é€‚äººç”Ÿã€‚",
            ideal: [2,1,3,2,0,1,2,1,2,2,1,2,1,0,1,2,1,2,2,2,1,2,1,1,2,1,0,1,1,2] // æ¯ä¸ªé—®é¢˜ç†æƒ³é€‰é¡¹ç´¢å¼•ï¼ˆ0-3ï¼‰
        },
        {
            name: "æ­å·",
            tags: ["æ–‡è‰ºå‹", "ç²¾è‡´å‹", "è‡ªç„¶å‹"],
            desc: "ä¸Šæœ‰å¤©å ‚ï¼Œä¸‹æœ‰è‹æ­ã€‚æ­å·å…¼å…·æ±Ÿå—è¯—æ„ä¸ç°ä»£ç§‘æŠ€ï¼Œè¥¿æ¹–ç¾æ™¯ã€äº’è”ç½‘æ°›å›´ï¼Œè®©ç”Ÿæ´»å……æ»¡è¯—æ„ä¸æ´»åŠ›ã€‚é€‚åˆè¿½æ±‚å“è´¨ç”Ÿæ´»çš„ä½ ã€‚",
            reason: "ä½ å’Œæ­å·ä¸€æ ·ï¼Œæ—¢æœ‰æ–‡è‰ºæƒ…æ€€åˆè¿½æ±‚ç²¾è‡´ç”Ÿæ´»ã€‚è¥¿æ¹–çš„çƒŸé›¨ã€é¾™äº•çš„èŒ¶é¦™ã€äº’è”ç½‘çš„åˆ›æ–°ï¼Œä¸ä½ çƒ­çˆ±è‡ªç„¶ã€æ‹¥æŠ±ç°ä»£çš„æ€§æ ¼ç›¸å¾—ç›Šå½°ã€‚",
            ideal: [2,0,1,1,1,2,3,1,2,1,1,1,0,0,0,2,0,2,1,1,1,1,1,2,1,1,1,2,1,0]
        },
        {
            name: "é’å²›",
            tags: ["è‡ªç„¶å‹", "ç¤¾äº¤å‹", "ä¼‘é—²å‹"],
            desc: "çº¢ç“¦ç»¿æ ‘ã€ç¢§æµ·è“å¤©çš„é’å²›ï¼Œå¾·å¼å»ºç­‘ä¸æµ·æ»¨é£æƒ…äº¤èã€‚å•¤é…’ã€æµ·é²œï¼Œç”Ÿæ´»æƒ¬æ„èˆ’é€‚ã€‚é€‚åˆçƒ­çˆ±æµ·æ´‹ã€è¿½æ±‚èˆ’é€‚ç”Ÿæ´»çš„ä½ ã€‚",
            reason: "ä½ å’Œé’å²›ä¸€æ ·ï¼Œçƒ­æƒ…çˆ½æœ—åˆçƒ­çˆ±è‡ªç„¶ã€‚æµ·æ»¨çš„æ¸…æ–°ã€å•¤é…’çš„é…£ç•…ï¼Œä¸ä½ å¼€æœ—çš„æ€§æ ¼å®Œç¾èåˆã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥é¢æœå¤§æµ·ï¼Œäº«å—ç”Ÿæ´»ã€‚",
            ideal: [3,2,0,2,1,1,0,1,3,2,0,2,2,1,0,0,2,1,1,2,2,0,2,0,0,2,1,2,2,3]
        },
        {
            name: "è¥¿å®‰",
            tags: ["æ–‡åŒ–å‹", "ä¼ ç»Ÿå‹", "æ¢ç´¢å‹"],
            desc: "å…­æœå¤éƒ½è¥¿å®‰ï¼Œå†å²åº•è•´æ·±åšã€‚å…µé©¬ä¿‘ã€å¤§é›å¡”ã€å›æ°‘è¡—ï¼Œåšé‡çš„æ–‡åŒ–ä¸ç¾é£Ÿäº¤èã€‚é€‚åˆçƒ­çˆ±å†å²ã€æ¢ç´¢æ–‡åŒ–çš„ä½ ã€‚",
            reason: "ä½ å’Œè¥¿å®‰ä¸€æ ·ï¼Œåšé‡æ·±æ²‰åˆå……æ»¡å†å²åº•è•´ã€‚å¤åŸå¢™çš„æ²§æ¡‘ã€ç¾é£Ÿè¡—çš„çƒŸç«ï¼Œä¸ä½ çƒ­çˆ±ä¼ ç»Ÿã€è¿½æ±‚æ·±åº¦çš„æ€§æ ¼ç›¸å¥‘åˆã€‚",
            ideal: [1,0,2,2,1,2,2,2,1,2,2,1,0,2,2,2,0,1,2,2,1,1,2,1,2,2,2,0,2,1]
        },
        {
            name: "è‹å·",
            tags: ["æ–‡è‰ºå‹", "ä¼ ç»Ÿå‹", "ç²¾è‡´å‹"],
            desc: "æ±Ÿå—æ°´ä¹¡è‹å·ï¼Œå›­æ—éå¸ƒã€å°æ¡¥æµæ°´ã€‚è¿™é‡Œçš„ç”Ÿæ´»æ¸©å©‰é›…è‡´ï¼ŒèŠ‚å¥é€‚ä¸­ã€‚é€‚åˆè¿½æ±‚è¯—æ„ç”Ÿæ´»ã€çƒ­çˆ±ä¼ ç»Ÿæ–‡åŒ–çš„ä½ ã€‚",
            reason: "ä½ å’Œè‹å·ä¸€æ ·ï¼Œæ¸©å©‰ç»†è…»åˆå……æ»¡è¯—æ„ã€‚å›­æ—çš„ç²¾è‡´ã€æ˜†æ›²çš„æ‚ æ‰¬ï¼Œä¸ä½ è¿½æ±‚å“è´¨ã€å–œçˆ±å®é™çš„æ€§æ ¼é«˜åº¦å¥‘åˆã€‚",
            ideal: [1,0,1,2,1,2,2,0,2,2,1,2,1,2,0,1,0,1,0,0,2,1,2,1,2,2,1,1,1,2]
        },
        {
            name: "å¹¿å·",
            tags: ["ç¤¾äº¤å‹", "å¥‹æ–—å‹", "ç¾é£Ÿå‹"],
            desc: "åŠ¡å®åŒ…å®¹çš„å¹¿å·ï¼Œç¾é£Ÿéåœ°ã€ç”Ÿæ´»æ°”æ¯æµ“åšã€‚æ¸©æš–çš„æ°”å€™ã€é€‚ä¸­çš„èŠ‚å¥ï¼Œè®©ç”Ÿæ´»å……æ»¡çƒŸç«æ°”ã€‚é€‚åˆçƒ­çˆ±ç¾é£Ÿã€è¿½æ±‚ç”Ÿæ´»å“è´¨çš„ä½ ã€‚",
            reason: "ä½ å’Œå¹¿å·ä¸€æ ·ï¼ŒåŠ¡å®åŒ…å®¹åˆçƒ­çˆ±ç”Ÿæ´»ã€‚æ—©èŒ¶çš„ç²¾è‡´ã€å¤œå¸‚çš„ç¹åï¼Œä¸ä½ é‡è§†ç¤¾äº¤ã€äº«å—å½“ä¸‹çš„æ€§æ ¼å®Œç¾å¥‘åˆã€‚",
            ideal: [0,2,3,0,0,0,1,0,0,1,0,0,2,0,2,1,2,2,0,0,0,0,0,1,0,0,0,0,0,0]
        },
        {
            name: "æ·±åœ³",
            tags: ["å¥‹æ–—å‹", "åˆ›æ–°å‹", "é‡å¿ƒå‹"],
            desc: "å¹´è½»æ´»åŠ›çš„æ·±åœ³ï¼Œåˆ›æ–°ä¸æœºé‡å¹¶å­˜ã€‚è¿™é‡ŒèŠ‚å¥å¿«ã€æœºä¼šå¤šï¼Œé€‚åˆè¿½æ±‚äº‹ä¸šã€æ•¢äºçªç ´çš„ä½ ã€‚",
            reason: "ä½ å’Œæ·±åœ³ä¸€æ ·ï¼Œå¹´è½»æœ‰ä¸ºåˆæ•¢äºçªç ´ã€‚ç§‘æŠ€å›­çš„æ‹¼æã€åˆ›ä¸šè€…çš„æ¿€æƒ…ï¼Œä¸ä½ è¿½æ±‚æ¢¦æƒ³ã€ä¸ç”˜å¹³åº¸çš„æ€§æ ¼é«˜åº¦å¥‘åˆã€‚",
            ideal: [0,3,3,0,2,0,2,0,0,0,3,0,2,0,2,2,2,2,0,3,0,2,0,2,3,0,2,2,0,2]
        },
        {
            name: "å—äº¬",
            tags: ["æ–‡è‰ºå‹", "æ–‡åŒ–å‹", "ç²¾è‡´å‹"],
            desc: "å…­æœå¤éƒ½å—äº¬ï¼Œå†å²ä¸ç°ä»£äº¤èã€‚æ¢§æ¡æ ‘ä¸‹ã€ç§¦æ·®æ²³ç•”ï¼Œè¿™é‡Œå……æ»¡æ–‡è‰ºæ°”æ¯ã€‚é€‚åˆçƒ­çˆ±å†å²ã€è¿½æ±‚æ–‡è‰ºç”Ÿæ´»çš„ä½ ã€‚",
            reason: "ä½ å’Œå—äº¬ä¸€æ ·ï¼Œæ¸©å©‰å†…ç§€åˆå……æ»¡åº•è•´ã€‚æ˜åŸå¢™çš„æ²§æ¡‘ã€å…ˆé”‹ä¹¦åº—çš„æ–‡è‰ºï¼Œä¸ä½ çƒ­çˆ±æ€è€ƒã€è¿½æ±‚æ·±åº¦ç”Ÿæ´»çš„æ€§æ ¼ç›¸å¥‘åˆã€‚",
            ideal: [1,0,2,1,1,2,2,1,1,2,2,1,1,2,1,2,1,2,1,1,1,1,2,1,2,1,1,1,1,2]
        },
        {
            name: "å¦é—¨",
            tags: ["æ–‡è‰ºå‹", "èººå¹³å‹", "è‡ªç„¶å‹"],
            desc: "æµ·ä¸ŠèŠ±å›­å¦é—¨ï¼Œæ°”å€™å®œäººã€é£æ™¯ä¼˜ç¾ã€‚é¼“æµªå±¿ã€ç¯å²›è·¯ï¼Œè¿™é‡Œçš„ç”Ÿæ´»å……æ»¡æ–‡è‰ºä¸æµªæ¼«ã€‚é€‚åˆè¿½æ±‚æ…¢ç”Ÿæ´»ã€çƒ­çˆ±æµ·æ´‹çš„ä½ ã€‚",
            reason: "ä½ å’Œå¦é—¨ä¸€æ ·ï¼Œæ–‡è‰ºæµªæ¼«åˆå……æ»¡æµ·æ´‹æ°”æ¯ã€‚ç¯å²›è·¯çš„æµ·é£ã€å’–å•¡é¦†çš„æ…µæ‡’ï¼Œä¸ä½ çƒ­çˆ±è‡ªç”±ã€äº«å—ç”Ÿæ´»çš„æ€§æ ¼å®Œç¾èåˆã€‚",
            ideal: [3,2,0,2,1,2,1,2,3,2,1,2,2,2,0,0,0,2,2,2,2,1,2,0,2,2,2,2,2,3]
        },
        {
            name: "å¤§è¿",
            tags: ["è‡ªç„¶å‹", "æ–‡è‰ºå‹", "èººå¹³å‹"],
            desc: "åŒ—æ–¹æ˜ç å¤§è¿ï¼Œæµ·æ»¨é£å…‰æ—–æ—ã€‚è¿™é‡Œå››å­£åˆ†æ˜ã€ç©ºæ°”æ¸…æ–°ï¼Œç”Ÿæ´»èŠ‚å¥é€‚ä¸­ã€‚é€‚åˆçƒ­çˆ±è‡ªç„¶ã€è¿½æ±‚èˆ’é€‚ç”Ÿæ´»çš„ä½ ã€‚",
            reason: "ä½ å’Œå¤§è¿ä¸€æ ·ï¼Œçˆ½æœ—åˆçƒ­çˆ±è‡ªç„¶ã€‚é‡‘çŸ³æ»©çš„æµ·æµªã€æ»¨æµ·è·¯çš„æœ¨æ ˆé“ï¼Œä¸ä½ å–œæ¬¢è¿åŠ¨ã€äº«å—æˆ·å¤–çš„ç”Ÿæ´»ä¹ æƒ¯é«˜åº¦ä¸€è‡´ã€‚",
            ideal: [3,2,0,1,2,2,0,2,3,2,0,2,2,2,0,0,1,2,1,1,2,1,2,0,0,2,1,2,2,3]
        },
        {
            name: "åŒ—äº¬",
            tags: ["å¥‹æ–—å‹", "æ–‡åŒ–å‹", "é‡å¿ƒå‹"],
            desc: "ä½œä¸ºé¦–éƒ½ï¼ŒåŒ—äº¬å…¼å…·ç°ä»£åŒ–ä¸æ·±åšçš„å†å²åº•è•´ã€‚è¿™é‡ŒèŠ‚å¥å¿«ã€æœºä¼šå¤šï¼Œå››å­£åˆ†æ˜çš„æ°”å€™è®©ä½ æ„Ÿå—æ—¶å…‰æµè½¬ã€‚é€‚åˆè¿½æ±‚äº‹ä¸šå‘å±•çš„ä½ ã€‚",
            reason: "ä½ å’ŒåŒ—äº¬ä¸€æ ·ï¼Œå¤§æ°”ç£…ç¤´åˆå……æ»¡æœºé‡ã€‚æ•…å®«çš„åšé‡ã€CBDçš„ç¹åï¼Œä¸ä½ å¿—å­˜é«˜è¿œã€å‹‡äºæŒ‘æˆ˜çš„æ€§æ ¼ç›¸å¾—ç›Šå½°ã€‚",
            ideal: [0,0,2,0,2,0,3,0,0,2,2,0,0,2,2,2,1,2,0,3,0,0,0,1,0,0,2,0,0,0]
        },
        {
            name: "ä¸Šæµ·",
            tags: ["ç²¾è‡´å‹", "å¥‹æ–—å‹", "æ—¶å°šå‹"],
            desc: "é­”éƒ½ä¸Šæµ·ï¼Œä¸­å›½æœ€å›½é™…åŒ–çš„åŸå¸‚ã€‚ç°ä»£ä¸ä¼ ç»Ÿäº¤èï¼Œå¿«èŠ‚å¥ä¸­ä¸å¤±ç²¾è‡´ã€‚é€‚åˆè¿½æ±‚å“è´¨ç”Ÿæ´»ã€å–œæ¬¢å¤šå…ƒæ–‡åŒ–çš„ä½ ã€‚",
            reason: "ä½ å’Œä¸Šæµ·ä¸€æ ·ï¼Œæ—¶å°šç²¾è‡´åˆå……æ»¡å›½é™…è§†é‡ã€‚å¤–æ»©çš„ç¹åã€å¼„å ‚çš„çƒŸç«ï¼Œä¸ä½ è¿½æ±‚å“è´¨ã€æ‹¥æŠ±å¤šå…ƒçš„æ€§æ ¼å®Œç¾åŒ¹é…ã€‚",
            ideal: [0,1,3,0,0,0,2,0,0,0,0,0,2,0,2,1,0,2,0,3,0,2,0,1,1,0,2,0,0,0]
        },
        {
            name: "é‡åº†",
            tags: ["ç¤¾äº¤å‹", "å¥‹æ–—å‹", "å†’é™©å‹"],
            desc: "8Dé­”å¹»å±±åŸé‡åº†ï¼Œç«é”…æ±Ÿæ¹–ã€å¤œæ™¯ç’€ç’¨ã€‚è¿™é‡Œçš„äººçƒ­æƒ…ç›´çˆ½ï¼Œç”Ÿæ´»å……æ»¡çƒŸç«æ°”ã€‚é€‚åˆæ€§æ ¼çˆ½æœ—ã€çƒ­çˆ±ç¾é£Ÿçš„ä½ ã€‚",
            reason: "ä½ å’Œé‡åº†ä¸€æ ·ï¼Œçƒ­æƒ…è±ªçˆ½åˆå……æ»¡æ´»åŠ›ã€‚å±±åŸçš„é­”å¹»ã€ç«é”…çš„ç«è¾£ï¼Œä¸ä½ ç›´çˆ½çš„æ€§æ ¼å’Œçƒ­çˆ±æŒ‘æˆ˜çš„ç²¾ç¥é«˜åº¦å¥‘åˆã€‚",
            ideal: [0,2,3,0,0,0,2,0,0,2,0,0,2,2,2,2,2,2,0,0,0,0,2,1,2,0,0,2,2,2]
        },
        {
            name: "æ­¦æ±‰",
            tags: ["ç¤¾äº¤å‹", "å¥‹æ–—å‹", "è±ªçˆ½å‹"],
            desc: "ä¹çœé€šè¡¢çš„æ­¦æ±‰ï¼Œæ±Ÿæ¹–æ°”æ¯æµ“åšã€‚çƒ­å¹²é¢ã€æ¨±èŠ±å­£ï¼Œè¿™é‡Œçš„ç”Ÿæ´»å……æ»¡çƒŸç«æ°”ä¸æµªæ¼«ã€‚é€‚åˆæ€§æ ¼è±ªçˆ½ã€çƒ­çˆ±ç”Ÿæ´»çš„ä½ ã€‚",
            reason: "ä½ å’Œæ­¦æ±‰ä¸€æ ·ï¼Œæ±Ÿæ¹–æ°”åè¶³åˆå……æ»¡ç”Ÿæ´»çƒ­æƒ…ã€‚é•¿æ±Ÿçš„å¥”æµã€è¡—å¤´çš„çƒŸç«ï¼Œä¸ä½ è±ªçˆ½çš„æ€§æ ¼å’Œçƒ­çˆ±ç”Ÿæ´»çš„æ€åº¦å®Œç¾å¥‘åˆã€‚",
            ideal: [0,1,2,0,0,0,1,0,0,1,0,0,2,0,2,1,2,2,0,2,0,0,0,1,0,0,0,0,0,0]
        },
        {
            name: "æ˜†æ˜",
            tags: ["è‡ªç„¶å‹", "èººå¹³å‹", "æ¢ç´¢å‹"],
            desc: "æ˜¥åŸæ˜†æ˜ï¼Œå››å­£å¦‚æ˜¥ã€æ°”å€™å®œäººã€‚è¿™é‡ŒèŠ‚å¥èˆ’ç¼“ã€æ°‘æ—é£æƒ…æµ“éƒï¼Œç”Ÿæ´»å……æ»¡é˜³å…‰ä¸æ¸©æš–ã€‚é€‚åˆè¿½æ±‚èˆ’é€‚æ°”å€™ã€çƒ­çˆ±è‡ªç„¶çš„ä½ ã€‚",
            reason: "ä½ å’Œæ˜†æ˜ä¸€æ ·ï¼Œæ¸©æš–éšå’Œåˆçƒ­çˆ±è‡ªç„¶ã€‚æ»‡æ± çš„æ¹–å…‰ã€æ–—å—çš„èŠ±å¸‚ï¼Œä¸ä½ å–œæ¬¢æ…¢ç”Ÿæ´»ã€äº«å—é˜³å…‰çš„æ€§æ ¼ç›¸å¾—ç›Šå½°ã€‚",
            ideal: [3,2,1,2,2,2,3,2,3,2,1,2,2,2,0,2,2,2,1,1,2,1,2,2,2,1,2,1,2,3]
        }
    ];

    // ç­”æ¡ˆå­˜å‚¨
    let answers = new Array(questions.length).fill(null);
    let currentQuestion = 0;

    // DOM å…ƒç´ 
    const homePage = document.getElementById('homePage');
    const testPage = document.getElementById('testPage');
    const resultPage = document.getElementById('resultPage');
    const startTestBtn = document.getElementById('startTestBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const restartBtn = document.getElementById('restartBtn');
    const testProgressText = document.getElementById('testProgressText');
    const testProgressPercent = document.getElementById('testProgressPercent');
    const progressFill = document.getElementById('progressFill');
    const questionTitle = document.getElementById('questionTitle');
    const optionsList = document.getElementById('optionsList');

    // ç»“æœé¡µå…ƒç´ 
    const mainMatchPercent = document.getElementById('mainMatchPercent');
    const mainCityName = document.getElementById('mainCityName');
    const mainCityTags = document.getElementById('mainCityTags');
    const matchReasonText = document.getElementById('matchReasonText');
    const otherCitiesContainer = document.getElementById('otherCitiesContainer');

    function showPage(page) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        page.classList.add('active');
        window.scrollTo(0, 0);
    }

    function renderQuestion() {
        const q = questions[currentQuestion];
        questionTitle.textContent = q.text;
        let html = '';
        q.options.forEach((opt, idx) => {
            const selectedClass = answers[currentQuestion] === idx ? 'selected' : '';
            html += `
                <div class="option-item ${selectedClass}" data-opt="${idx}">
                    <span class="option-radio"></span>
                    <span class="option-text">${opt}</span>
                </div>
            `;
        });
        optionsList.innerHTML = html;

        // ç»‘å®šç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.option-item').forEach(item => {
            item.addEventListener('click', () => {
                const optIdx = parseInt(item.dataset.opt);
                answers[currentQuestion] = optIdx;
                // æ¸…é™¤å…¶ä»–é€‰ä¸­
                document.querySelectorAll('.option-item').forEach(oi => oi.classList.remove('selected'));
                item.classList.add('selected');
            });
        });

        // æ›´æ–°è¿›åº¦
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        testProgressText.textContent = `é—®é¢˜ ${currentQuestion + 1} / ${questions.length}`;
        testProgressPercent.textContent = `${Math.round(progress)}%`;
        progressFill.style.width = `${progress}%`;

        // ä¸Šä¸€é¢˜æŒ‰é’®çŠ¶æ€
        if (currentQuestion === 0) {
            prevBtn.classList.remove('active');
            prevBtn.disabled = true;
        } else {
            prevBtn.classList.add('active');
            prevBtn.disabled = false;
        }

        // ä¸‹ä¸€é¢˜æŒ‰é’®æ–‡å­—
        nextBtn.textContent = currentQuestion === questions.length - 1 ? 'æŸ¥çœ‹ç»“æœ' : 'ä¸‹ä¸€é¢˜';
    }

    // è®¡ç®—ä¸æ¯ä¸ªåŸå¸‚çš„åŒ¹é…åº¦ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå½’ä¸€åŒ–åˆ°0-100%ï¼‰
    function calculateMatches() {
        const userVec = answers.slice(); // 0-3
        const scores = cities.map(city => {
            const idealVec = city.ideal;
            // è®¡ç®—ç›¸ä¼¼åº¦ï¼šç”¨å·®å€¼ç»å¯¹å€¼è½¬æ¢æˆç›¸ä¼¼åº¦ï¼ˆå€¼è¶Šå°è¶Šç›¸ä¼¼ï¼‰
            let diff = 0;
            for (let i = 0; i < userVec.length; i++) {
                diff += Math.abs(userVec[i] - idealVec[i]);
            }
            // æœ€å¤§å¯èƒ½å·®å€¼ï¼šæ¯ä¸ªé—®é¢˜æœ€å¤§å·®3ï¼Œ30é¢˜å…±90
            const maxDiff = 3 * questions.length;
            const similarity = 100 - (diff / maxDiff) * 100;
            return { city, similarity };
        });
        // æŒ‰ç›¸ä¼¼åº¦é™åº
        scores.sort((a, b) => b.similarity - a.similarity);
        return scores;
    }

    function showResult() {
        const scores = calculateMatches();
        const main = scores[0];
        const others = scores.slice(1, 7); // å–ç¬¬2åˆ°ç¬¬7å

        // ä¸»åŸå¸‚
        mainMatchPercent.textContent = `${Math.round(main.similarity)}%`;
        mainCityName.textContent = `ğŸ“ ä½ çš„å¤©é€‰ä¹‹åŸï¼š${main.city.name}`;
        // ä¸»åŸå¸‚æ ‡ç­¾ï¼ˆåŸå¸‚è‡ªèº«æ ‡ç­¾ + æ€§æ ¼æ ‡ç­¾ï¼‰
        const tags = main.city.tags;
        mainCityTags.innerHTML = tags.map(t => `<span class="tag light-blue">${t}</span>`).join('');
        matchReasonText.textContent = main.city.reason;

        // å…¶ä»–åŸå¸‚
        otherCitiesContainer.innerHTML = others.map(item => {
            const city = item.city;
            const match = Math.round(item.similarity);
            const tagHtml = city.tags.map(t => `<span class="tag light-blue">${t}</span>`).join('');
            return `
                <div class="other-city-card">
                    <div class="other-city-header">
                        <div class="other-city-name">
                            <span>ğŸ“</span>
                            <span>${city.name}</span>
                        </div>
                        <div class="other-city-match">${match}%</div>
                    </div>
                    <div class="other-city-tags">
                        ${tagHtml}
                    </div>
                    <p class="other-city-desc">${city.desc}</p>
                </div>
            `;
        }).join('');

        showPage(resultPage);
    }

    // äº‹ä»¶ç›‘å¬
    startTestBtn.addEventListener('click', () => {
        // é‡ç½®çŠ¶æ€
        answers.fill(null);
        currentQuestion = 0;
        renderQuestion();
        showPage(testPage);
    });

    prevBtn.addEventListener('click', () => {
        if (currentQuestion > 0) {
            currentQuestion--;
            renderQuestion();
        }
    });

    nextBtn.addEventListener('click', () => {
        if (answers[currentQuestion] === undefined) {
            alert('è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹');
            return;
        }
        if (currentQuestion < questions.length - 1) {
            currentQuestion++;
            renderQuestion();
        } else {
            showResult();
        }
    });

    restartBtn.addEventListener('click', () => {
        showPage(homePage);
    });
</script>
</body>
</html>