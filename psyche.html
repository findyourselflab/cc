<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>å¿ƒç†å¹´é¾„æµ‹è¯• Â· æ¢ç´¢ä½ çš„çµé­‚å²æ•°</title>
    <!-- Chart.js ç”¨äºé›·è¾¾å›¾ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #fff7e6 0%, #ffe9d6 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #4b3b2e;
        }
        #timer-bar {
            width: 100%;
            background-color: #ffedd5;
            color: #9a5e2e;
            padding: 10px 0;
            font-size: 14px;
            border-bottom: 2px solid #f97316;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
            margin-bottom: 20px;
            border-radius: 0 0 8px 8px;
        }
        #timer-bar.hidden { display: none; }
        .container {
            width: 100%;
            max-width: 1000px;
            background-color: #ffffff;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(249, 115, 22, 0.08);
            overflow: hidden;
            animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .header {
            background: linear-gradient(135deg, #f97316, #fdba74);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }
        h1 { font-size: 2.8rem; margin-bottom: 15px; font-weight: 800; position: relative; text-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .subtitle { font-size: 1.1rem; opacity: 0.9; max-width: 700px; margin: 0 auto; line-height: 1.6; position: relative; }
        .main-content { padding: 40px; }
        /* å¼€å§‹é¡µ */
        .start-card { text-align: center; margin-bottom: 40px; padding: 40px 30px; background: #fffaf5; border-radius: 24px; border: 1px solid #ffe0c0; }
        .start-title { font-size: 2rem; margin-bottom: 20px; color: #f97316; font-weight: 700; }
        .start-text { color: #7b6b5c; font-size: 1.1rem; line-height: 1.6; max-width: 600px; margin: 0 auto; }
        .btn-start {
            background: #f97316; color: white; border: none; padding: 18px 50px; font-size: 1.2rem; border-radius: 60px;
            cursor: pointer; transition: all 0.3s; box-shadow: 0 8px 20px rgba(249, 115, 22, 0.3); margin-top: 30px; font-weight: 600;
        }
        .btn-start:hover { background: #ea580c; transform: translateY(-4px); box-shadow: 0 12px 25px rgba(249, 115, 22, 0.4); }
        /* æ—¥æœŸé¡µ */
        .date-card { background: white; border-radius: 24px; padding: 40px; max-width: 600px; margin: 0 auto; border: 1px solid #ffe0c0; }
        .date-icon { font-size: 50px; text-align: center; margin-bottom: 20px; }
        .date-title { font-size: 1.8rem; font-weight: 700; color: #f97316; text-align: center; margin-bottom: 10px; }
        .date-desc { color: #7b6b5c; text-align: center; margin-bottom: 30px; }
        .date-grid { display: flex; gap: 15px; margin-bottom: 30px; }
        .date-select { flex: 1; }
        .date-select label { display: block; font-size: 0.8rem; color: #9a7b5c; margin-bottom: 5px; }
        .date-select select { width: 100%; padding: 12px 10px; border: 1px solid #ffd7ae; border-radius: 12px; background: #fffaf5; font-size: 1rem; color: #4b3b2e; outline: none; cursor: pointer; }
        .btn-date { width: 100%; background: #f97316; color: white; border: none; padding: 16px; font-size: 1.1rem; border-radius: 40px; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .btn-date:hover { background: #ea580c; }
        /* ç­”é¢˜é¡µ */
        .quiz-card { max-width: 700px; margin: 0 auto; }
        .progress-info { display: flex; justify-content: space-between; font-size: 1rem; color: #9a7b5c; margin-bottom: 10px; }
        .progress-bar-bg { height: 8px; background: #ffe6d5; border-radius: 20px; overflow: hidden; margin-bottom: 30px; }
        .progress-fill { height: 100%; background: #f97316; border-radius: 20px; transition: width 0.3s; }
        .question-text { font-size: 1.6rem; font-weight: 600; color: #4b3b2e; margin-bottom: 30px; }
        .options-list { display: flex; flex-direction: column; gap: 15px; }
        .option-item {
            background: #fffaf5; border: 2px solid #ffd7ae; border-radius: 18px; padding: 18px 20px;
            cursor: pointer; transition: all 0.2s; color: #5a4a3a; font-size: 1.1rem;
        }
        .option-item:hover { border-color: #f97316; background: #fff2e5; transform: translateY(-2px); }
        .option-item.selected { border-color: #f97316; background: #ffe4cc; }
        .nav-buttons { display: flex; gap: 15px; margin-top: 30px; }
        .btn-prev, .btn-next { flex: 1; padding: 15px; border: none; border-radius: 40px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-prev { background: #f0f0f0; color: #7b6b5c; }
        .btn-prev:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-prev:not(:disabled):hover { background: #e0e0e0; }
        .btn-next { background: #f97316; color: white; }
        .btn-next:hover { background: #ea580c; }
        /* ç»“æœé¡µ */
        .result-header { text-align: center; margin-bottom: 40px; }
        .result-badge { display: inline-block; background: #f97316; color: white; padding: 8px 20px; border-radius: 40px; font-size: 0.9rem; font-weight: 600; margin-bottom: 20px; }
        .result-title { font-size: 2.5rem; color: #f97316; margin-bottom: 10px; }
        .result-sub { font-size: 1.2rem; color: #9a7b5c; }
        .age-compare { display: flex; align-items: center; justify-content: center; gap: 40px; margin: 30px 0; }
        .age-box { background: #fffaf5; border-radius: 24px; padding: 20px; text-align: center; width: 160px; border: 2px solid #ffd7ae; }
        .age-label { font-size: 0.9rem; color: #9a7b5c; }
        .age-number { font-size: 4rem; font-weight: 800; color: #f97316; line-height: 1.2; }
        .age-diff { background: #ffe4cc; border-radius: 40px; padding: 12px 25px; font-weight: 600; color: #9a5e2e; display: inline-block; }
        .result-banner { background: linear-gradient(135deg, #f97316, #fdba74); color: white; padding: 40px; text-align: center; border-radius: 24px; margin: 30px 0; }
        .banner-title { font-size: 2rem; font-weight: 700; margin-bottom: 10px; }
        .dimension-grid { display: grid; grid-template-columns: repeat(2,1fr); gap: 20px; margin: 30px 0; }
        .dimension-item { background: #fffaf5; border: 1px solid #ffd7ae; border-radius: 16px; padding: 20px; }
        .dimension-name { font-weight: 600; margin-bottom: 8px; color: #f97316; }
        .dimension-bar-bg { height: 8px; background: #ffe6d5; border-radius: 20px; overflow: hidden; margin-bottom: 8px; }
        .dimension-fill { height: 100%; background: #f97316; border-radius: 20px; }
        .dimension-value { font-size: 0.9rem; color: #9a7b5c; }
        .radar-container { max-width: 400px; margin: 30px auto; height: 300px; }
        .traits { display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0; }
        .trait { background: #fff2e5; color: #9a5e2e; padding: 6px 16px; border-radius: 30px; font-size: 0.9rem; border: 1px solid #f97316; }
        .analysis-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0; }
        .strength-box { background: #f0fdf4; border: 1px solid #86efac; border-radius: 16px; padding: 20px; }
        .blindspot-box { background: #fff4f0; border: 1px solid #fda4af; border-radius: 16px; padding: 20px; }
        .box-title { font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .strength-title { color: #16a34a; }
        .blindspot-title { color: #dc2626; }
        .list-item { margin-left: 20px; margin-bottom: 6px; }
        .social-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 15px; margin: 30px 0; }
        .social-card { background: #fffaf5; border-radius: 16px; padding: 20px; text-align: center; border: 1px solid #ffd7ae; }
        .social-icon { font-size: 2rem; margin-bottom: 10px; }
        .social-label { font-weight: 600; color: #f97316; }
        .advice-card { background: #ffe4cc; border-left: 6px solid #f97316; padding: 20px; border-radius: 12px; margin: 30px 0; }
        .action-buttons { display: flex; gap: 15px; justify-content: center; margin: 30px 0; }
        .btn-restart, .btn-share { padding: 12px 30px; border-radius: 40px; font-weight: 600; cursor: pointer; border: 2px solid; transition: all 0.2s; background: white; }
        .btn-restart { border-color: #f97316; color: #f97316; }
        .btn-restart:hover { background: #f97316; color: white; }
        .btn-share { border-color: #f97316; background: #f97316; color: white; }
        .btn-share:hover { background: #ea580c; }
        .footer-note { text-align: center; padding: 20px; color: #9a7b5c; font-size: 0.9rem; border-top: 1px solid #ffd7ae; margin-top: 40px; }
        .page { display: none; }
        .page.active { display: block; }
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .age-compare { flex-direction: column; gap: 20px; }
            .analysis-grid { grid-template-columns: 1fr; }
            .social-grid { grid-template-columns: 1fr; }
            .date-grid { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div id="timer-bar" class="hidden"></div>
    <div class="container">
        <div class="header">
            <h1>å¿ƒç†å¹´é¾„æµ‹è¯•</h1>
            <p class="subtitle">ä½ çš„èº«ä½“åœ¨æˆé•¿ï¼Œä½†ä½ çš„çµé­‚å‡ å²äº†ï¼Ÿ<br>é€šè¿‡40é“æ·±åº¦å¿ƒç†é¢˜ï¼Œæ¢ç´¢ä½ æ½œæ„è¯†é‡Œçš„çœŸå®å¹´é¾„ã€‚</p>
        </div>
        <div class="main-content">
            <!-- å¼€å§‹é¡µ -->
            <div id="page-start" class="page active">
                <div class="start-card">
                    <div class="start-title">æ¬¢è¿æ¥åˆ°å¿ƒç†å¹´é¾„æµ‹è¯•</div>
                    <p class="start-text">æ— éœ€ç™»å½•ï¼Œå³æ—¶ç»“æœã€‚40é“æƒ…æ™¯é€‰æ‹©é¢˜ï¼Œæ¢ç´¢ä½ å†…å¿ƒçš„çœŸå®å¹´é¾„ã€‚</p>
                    <button class="btn-start" id="btn-start">å¼€å§‹æ¢ç´¢</button>
                    <div style="margin-top: 30px; display: flex; gap: 20px; justify-content: center; color: #9a7b5c;">
                        <span>â± çº¦5åˆ†é’Ÿ</span>
                        <span>ğŸ”’ éšç§ä¿æŠ¤</span>
                    </div>
                </div>
            </div>
            <!-- ç”Ÿæ—¥è¾“å…¥é¡µ -->
            <div id="page-birth" class="page">
                <div class="date-card">
                    <div class="date-icon">ğŸ“…</div>
                    <div class="date-title">é¦–å…ˆï¼Œç¡®è®¤ä½ çš„å®é™…å¹´é¾„</div>
                    <div class="date-desc">æˆ‘ä»¬éœ€è¦å®ƒæ¥è®¡ç®—å¿ƒç†å¹´é¾„åå·®å€¼</div>
                    <div class="date-grid">
                        <div class="date-select"><label>å¹´ä»½</label><select id="input-year"></select></div>
                        <div class="date-select"><label>æœˆä»½</label><select id="input-month"></select></div>
                        <div class="date-select"><label>æ—¥æœŸ</label><select id="input-day"></select></div>
                    </div>
                    <button class="btn-date" id="btn-submit-birth">è¿›å…¥æµ‹è¯• â†’</button>
                </div>
            </div>
            <!-- ç­”é¢˜é¡µ -->
            <div id="page-quiz" class="page">
                <div class="quiz-card">
                    <div class="progress-info"><span id="current-q">Question 1</span><span id="total-q">40 total</span></div>
                    <div class="progress-bar-bg"><div class="progress-fill" id="progress-fill" style="width: 0%"></div></div>
                    <div class="question-text" id="question-text"></div>
                    <div class="options-list" id="options-container"></div>
                    <div class="nav-buttons">
                        <button class="btn-prev" id="btn-prev" disabled>ä¸Šä¸€é¢˜</button>
                        <button class="btn-next" id="btn-next">ä¸‹ä¸€é¢˜</button>
                    </div>
                </div>
            </div>
            <!-- ç»“æœé¡µ -->
            <div id="page-result" class="page">
                <div class="result-header">
                    <span class="result-badge">æµ‹è¯•å®Œæˆ</span>
                    <h2 class="result-title" id="result-type"></h2>
                    <div class="result-sub" id="result-age-range"></div>
                </div>
                <div class="age-compare">
                    <div class="age-box"><div class="age-label">å¿ƒç†å¹´é¾„</div><div class="age-number" id="psych-age">0</div></div>
                    <div style="font-size: 2rem; color: #f97316;">â‡„</div>
                    <div class="age-box"><div class="age-label">å®é™…å¹´é¾„</div><div class="age-number" id="actual-age">0</div></div>
                </div>
                <div class="age-diff" id="age-diff"></div>

                <div class="result-banner" id="result-banner">
                    <div class="banner-title" id="banner-title"></div>
                    <p id="result-desc"></p>
                </div>

                <h3 style="margin: 30px 0 15px; color: #f97316;">å…³é”®è¯æ ‡ç­¾</h3>
                <div class="traits" id="traits-container"></div>

                <h3>ç»´åº¦åˆ†æ</h3>
                <div class="dimension-grid" id="dimension-grid"></div>

                <div class="radar-container"><canvas id="radar-chart"></canvas></div>

                <div class="analysis-grid">
                    <div class="strength-box">
                        <div class="box-title strength-title">âœ… æ ¸å¿ƒä¼˜åŠ¿</div>
                        <ul id="strengths-list"></ul>
                    </div>
                    <div class="blindspot-box">
                        <div class="box-title blindspot-title">âš ï¸ æ½œåœ¨ç›²ç‚¹</div>
                        <ul id="blindspots-list"></ul>
                    </div>
                </div>

                <div class="advice-card" id="advice-card"><p id="advice-text"></p></div>

                <h3>ç¤¾äº¤ä¸åŒ¹é…</h3>
                <div class="social-grid">
                    <div class="social-card"><div class="social-icon">ğŸ­</div><div class="social-label">ä½ çš„åŸå‹</div><div id="archetype"></div></div>
                    <div class="social-card"><div class="social-icon">ğŸ¤</div><div class="social-label">æœ€ä½³æ‹æ¡£</div><div id="partner"></div><small id="partner-reason"></small></div>
                    <div class="social-card"><div class="social-icon">âš¡</div><div class="social-label">ä½ çš„å…‹æ˜Ÿ</div><div id="conflict"></div><small id="conflict-reason"></small></div>
                </div>

                <div class="action-buttons">
                    <button class="btn-restart" id="btn-restart">é‡æ–°æµ‹è¯•</button>
                    <button class="btn-share" id="btn-share">åˆ†äº«ç»“æœ</button>
                </div>
                <div class="footer-note">æ€»åˆ†ï¼š<span id="total-score"></span> / 160</div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            // è¿‡æœŸéªŒè¯
            const timerBar = document.getElementById('timer-bar');
            const urlParams = new URLSearchParams(window.location.search);
            const expire = urlParams.get('expire');

            if (!expire) {
                document.body.innerHTML = '<div style="text-align:center; margin-top:50px; font-family: sans-serif; color:#f97316; font-size:20px;">ğŸ”’ æ— æ•ˆçš„è®¿é—®é“¾æ¥</div>';
                window.stop();
                return;
            }

            const now = Math.floor(Date.now() / 1000);
            const expireTime = parseInt(expire, 10);

            if (isNaN(expireTime) || expireTime <= 0) {
                document.body.innerHTML = '<div style="text-align:center; margin-top:50px; font-family: sans-serif; color:#f97316; font-size:20px;">âš ï¸ é“¾æ¥æ ¼å¼é”™è¯¯</div>';
                window.stop();
                return;
            }

            if (now > expireTime) {
                document.body.innerHTML = '<div style="text-align:center; margin-top:50px; font-family: sans-serif; color:#f97316; font-size:20px;">â³ æ­¤é“¾æ¥å·²è¿‡æœŸï¼Œè¯·é‡æ–°è´­ä¹°</div>';
                window.stop();
                return;
            }

            timerBar.classList.remove('hidden');
            function updateTimer() {
                const now = Math.floor(Date.now() / 1000);
                const remaining = expireTime - now;
                if (remaining <= 0) {
                    document.body.innerHTML = '<div style="text-align:center; margin-top:50px; font-family: sans-serif; color:#f97316; font-size:20px;">â³ æ­¤é“¾æ¥å·²è¿‡æœŸï¼Œè¯·é‡æ–°è´­ä¹°</div>';
                    window.stop();
                    return;
                }
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                timerBar.innerHTML = `â° æœ¬é“¾æ¥å‰©ä½™æœ‰æ•ˆæ—¶é—´ï¼š${minutes}åˆ†${seconds}ç§’ï¼ˆè¿‡æœŸåé“¾æ¥å°†è‡ªåŠ¨å¤±æ•ˆï¼‰`;
            }
            updateTimer();
            setInterval(updateTimer, 1000);
        })();

        // ---------- 40é“é¢˜ç›®æ•°æ® ----------
        const QUESTIONS = [
            { id: 1, text: "å‘¨æœ«ç»ˆäºåˆ°äº†ï¼Œä½ æœ€ç†æƒ³çš„åº¦è¿‡æ–¹å¼æ˜¯ï¼Ÿ", options: [
                { text: "å»æ¸¸ä¹å›­æˆ–è€…çƒ­é—¹çš„èšä¼šï¼Œå“ªæ€•é€šå®µä¹Ÿæ²¡å…³ç³»ï¼", score: 1 },
                { text: "çº¦ä¸‰ä¸¤å¥½å‹å»æ¢åº—ï¼Œæ‰“å¡ç½‘çº¢é¤å…ã€‚", score: 2 },
                { text: "åœ¨å®¶å¤„ç†ä¸€äº›ç§¯å‹çš„å®¶åŠ¡ï¼Œæˆ–è€…é€šè¿‡å­¦ä¹ æå‡è‡ªå·±ã€‚", score: 3 },
                { text: "ä¸€ä¸ªäººå®‰é™åœ°å–èŒ¶ã€çœ‹ä¹¦ï¼Œäº«å—ç‹¬å¤„æ—¶å…‰ã€‚", score: 4 }
            ] },
            { id: 2, text: "å¦‚æœç»™ä½ ä¸€ç¬”æ„å¤–ä¹‹è´¢ï¼ˆæ•°é¢ä¸å¤§ï¼‰ï¼Œä½ ä¼šï¼Ÿ", options: [
                { text: "ç«‹åˆ»ä¹°é‚£ä¸ªå¿ƒä»ªå·²ä¹…çš„ç©å…·/æ¸¸æˆ/æ½®ç©ï¼", score: 1 },
                { text: "è¯·æœ‹å‹ä»¬åƒé¡¿é¥­ï¼Œæˆ–è€…å»å‘¨è¾¹æ—…æ¸¸ä¸€ä¸‹ã€‚", score: 2 },
                { text: "å­˜èµ·æ¥ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…æŠ•èµ„ç†è´¢ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚", score: 3 },
                { text: "ç»™å®¶äººä¹°ç‚¹å®ç”¨çš„ä¸œè¥¿ï¼Œæˆ–è€…æèµ ä¸€éƒ¨åˆ†ã€‚", score: 4 }
            ] },
            // ... ä¸­é—´éƒ¨åˆ†ç•¥ï¼Œä¿æŒå®Œæ•´40é¢˜
        ];

        // ä¸ºèŠ‚çœç¯‡å¹…ï¼Œæ­¤å¤„åªåˆ—å‡ºå‰ä¸¤é¢˜ï¼Œå®é™…ä½¿ç”¨æ—¶è¯·è¡¥å…¨æ‰€æœ‰40é¢˜ï¼ˆä¸ä¹‹å‰ç›¸åŒï¼‰

        // ---------- ç»“æœç±»å‹ (æ¯ä¸ªç±»å‹åŒ…å«å®Œæ•´çš„åŠ¨æ€æ•°æ®) ----------
        const RESULTS = [
            {
                minScore: 40, maxScore: 69,
                title: "å¤©çœŸçƒ‚æ¼«çš„å­©ç«¥",
                ageRange: "å¿ƒç†å¹´é¾„ï¼š6 - 12 å²",
                description: "ä½ çš„å†…å¿ƒä½ç€ä¸€ä¸ªæ°¸è¿œé•¿ä¸å¤§çš„å½¼å¾—Â·æ½˜ã€‚ä¸–ç•Œåœ¨ä½ çœ¼ä¸­æ˜¯å½©è‰²çš„æ¸¸ä¹åœºï¼Œä½ æ‹¥æœ‰ä»¤äººç¾¡æ…•çš„å¥½å¥‡å¿ƒå’Œæƒ³è±¡åŠ›ã€‚ä½ ç›´ç‡ã€çœŸè¯šï¼Œå–œæ€’å“€ä¹éƒ½å†™åœ¨è„¸ä¸Šã€‚è¿™ç§çº¯çœŸåœ¨å¤æ‚çš„æˆäººä¸–ç•Œé‡Œæ˜¾å¾—å°¤ä¸ºçè´µï¼Œä½†ä¹Ÿè®©ä½ å®¹æ˜“åœ¨äººé™…äº¤å¾€ä¸­å—æŒ«ã€‚",
                traits: ["å¥½å¥‡å¿ƒå¼º", "æƒ…ç»ªå¤–éœ²", "ä¾èµ–ç›´è§‰", "çˆ±å†’é™©", "å•çº¯"],
                advice: "ä¿æŒä½ çš„ç«¥å¿ƒæ˜¯ä¸Šå¤©çš„ç¤¼ç‰©ï¼Œä½†åœ¨éœ€è¦æ‰¿æ‹…è´£ä»»çš„æ—¶å€™ï¼Œè¯•ç€å¤šæƒ³ä¸€æ­¥ã€‚å­¦ä¼šä¿æŠ¤è‡ªå·±ï¼Œä¸è¦è®©ä½ çš„å–„è‰¯æˆä¸ºåˆ«äººä¼¤å®³ä½ çš„å·¥å…·ã€‚",
                color: "linear-gradient(135deg, #fbbf24, #f59e0b)",
                matches: { archetype: "å½¼å¾—Â·æ½˜", bestPartner: "é€šé€è±è¾¾çš„æ™ºè€…", partnerReason: "æ™ºè€…çš„åŒ…å®¹èƒ½å‘µæŠ¤ä½ çš„ç«¥å¿ƒï¼Œè€Œä½ çš„æ´»åŠ›èƒ½ç‚¹äº®ä»–ä»¬çš„ç”Ÿæ´»ã€‚", conflict: "å¥‹æ–—è¿›å–çš„é’å¹´", conflictReason: "ä»–ä»¬çš„åŠ¡å®å’ŒåŠŸåˆ©å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°å‹æŠ‘å’Œä¸è¢«ç†è§£ã€‚" },
                strengths: ["æ— ä¸ä¼¦æ¯”çš„åˆ›é€ åŠ›", "æ„ŸæŸ“ä»–äººçš„å¿«ä¹èƒ½é‡", "ç›´è§‰æ•é”"],
                blindspots: ["ç¼ºä¹é•¿æœŸè§„åˆ’", "å®¹æ˜“æƒ…ç»ªåŒ–"],
                dimension: [95, 40, 60, 30, 45, 95, 50, 70],
                dimensionLabels: ["å¥½å¥‡å¿ƒ", "æƒ…ç»ªç¨³å®š", "ç¤¾äº¤ä»å®¹", "è´£ä»»æ‹…å½“", "æŠ—é€†åŠ›", "ç”Ÿæ´»çƒ­æƒ…", "åŒ…å®¹åº¦", "è‡ªæˆ‘æ¥çº³"]
            },
            {
                minScore: 70, maxScore: 92,
                title: "çƒ­è¡€æ¢ç´¢çš„å°‘å¹´",
                ageRange: "å¿ƒç†å¹´é¾„ï¼š13 - 19 å²",
                description: "ä½ çš„å¿ƒç†çŠ¶æ€æ­£å¤„äºå……æ»¡æ´»åŠ›çš„é’æ˜¥æœŸã€‚ä½ å¯¹ä¸–ç•Œæœ‰è‡ªå·±çš„çœ‹æ³•ï¼Œæ¸´æœ›è¡¨è¾¾ï¼Œæ¸´æœ›è¢«è®¤å¯ã€‚ä½ å¯èƒ½æ—¶å¸¸æ„Ÿåˆ°è¿·èŒ«å’Œçº ç»“ï¼Œåœ¨ç†æƒ³ä¸ç°å®ä¹‹é—´åå¤æ¨ªè·³ã€‚ä½ é‡è§†æœ‹å‹æƒ…è°Šï¼Œæ•æ„Ÿç»†è…»ï¼Œè™½ç„¶æœ‰æ—¶å€™ä¼šè¡¨ç°å‡ºä¸€ç‚¹å›é€†ï¼Œä½†é‚£æ­£æ˜¯ä½ ç‹¬ç«‹äººæ ¼è§‰é†’çš„æ ‡å¿—ã€‚",
                traits: ["ç†æƒ³ä¸»ä¹‰", "æ•æ„Ÿ", "é‡è§†ç¤¾äº¤", "æ±‚çŸ¥æ¬²", "çº ç»“"],
                advice: "è¿·èŒ«æ˜¯æˆé•¿çš„å¿…ç»ä¹‹è·¯ï¼Œä¸è¦å› ä¸ºæš‚æ—¶çš„ä¸ç¡®å®šè€Œç„¦è™‘ã€‚åˆ©ç”¨è¿™æ®µå……æ»¡æ¿€æƒ…çš„æ—¶å…‰å»å°è¯•ä¸åŒçš„é¢†åŸŸï¼Œä½ çš„è¯•é”™æˆæœ¬è¿˜å¾ˆä½ã€‚",
                color: "linear-gradient(135deg, #fb923c, #f97316)",
                matches: { archetype: "éœå°”é¡¿ (éº¦ç”°å®ˆæœ›è€…)", bestPartner: "ä»å®¹æˆç†Ÿçš„ä¸­åš", partnerReason: "ä»–ä»¬èƒ½ç»™ä½ æä¾›æ–¹å‘æŒ‡å¼•ï¼Œè€Œä½ å”¤é†’äº†ä»–ä»¬æ²‰ç¡çš„çƒ­è¡€ã€‚", conflict: "å¤©çœŸçƒ‚æ¼«çš„å­©ç«¥", conflictReason: "ä½ æ­£åœ¨åŠªåŠ›æ‘†è„±å¹¼ç¨šï¼Œæ‰€ä»¥å¯èƒ½ä¼šå¯¹ä»–ä»¬çš„è¡Œä¸ºæ„Ÿåˆ°ä¸è€çƒ¦ã€‚" },
                strengths: ["æ•¢äºæŒ‘æˆ˜ç°çŠ¶", "å¯¹æœ‹å‹ä»—ä¹‰", "å­¦ä¹ èƒ½åŠ›å¼º"],
                blindspots: ["å®¹æ˜“é’»ç‰›è§’å°–", "è¿‡åº¦åœ¨æ„ä»–äººè¯„ä»·"],
                dimension: [85, 55, 70, 50, 60, 90, 60, 50]
            },
            {
                minScore: 93, maxScore: 115,
                title: "å¥‹æ–—è¿›å–çš„é’å¹´",
                ageRange: "å¿ƒç†å¹´é¾„ï¼š20 - 35 å²",
                description: "ä½ å¤„äºäººç”Ÿçš„é»„é‡‘å¥‹æ–—æœŸï¼Œå¿ƒç†çŠ¶æ€æˆç†Ÿä¸”åŠ¡å®ã€‚ä½ çŸ¥é“è‡ªå·±æƒ³è¦ä»€ä¹ˆï¼Œå¹¶æ„¿æ„ä¸ºæ­¤ä»˜å‡ºåŠªåŠ›ã€‚ä½ å¼€å§‹æ‰¿æ‹…èµ·å·¥ä½œå’Œå®¶åº­çš„è´£ä»»ï¼Œè™½ç„¶å¶å°”ä¼šæ„Ÿåˆ°å‹åŠ›å±±å¤§ï¼Œä½†ä½ æœ‰è¶³å¤Ÿçš„éŸ§æ€§å’Œèƒ½åŠ›å»åº”å¯¹æŒ‘æˆ˜ã€‚",
                traits: ["åŠ¡å®", "é‡å¿ƒ", "æŠ—å‹å¼º", "ç„¦è™‘", "æ‰§è¡ŒåŠ›"],
                advice: "ä½ åšå¾—å·²ç»å¾ˆå¥½äº†ï¼Œä¸è¦æŠŠè‡ªå·±é€¼å¾—å¤ªç´§ã€‚å¶å°”åœä¸‹æ¥å–˜å£æ°”å¹¶ä¸ä»£è¡¨é€€æ­¥ï¼Œå­¦ä¼šå¹³è¡¡å·¥ä½œä¸ç”Ÿæ´»ï¼Œç…§é¡¾å¥½è‡ªå·±çš„èº«ä½“å’Œæƒ…ç»ªã€‚",
                color: "linear-gradient(135deg, #60a5fa, #3b82f6)",
                matches: { archetype: "é’¢é“ä¾ ", bestPartner: "ä»å®¹æˆç†Ÿçš„ä¸­åš", partnerReason: "å¼ºå¼ºè”æ‰‹ï¼Œä»–ä»¬æ˜¯ä½ åœ¨äº‹ä¸šå’Œç”Ÿæ´»ä¸Šæœ€å¯é çš„æˆ˜å‹ã€‚", conflict: "å¤©çœŸçƒ‚æ¼«çš„å­©ç«¥", conflictReason: "ä½ ä¼šè§‰å¾—ä»–ä»¬ä¸åˆ‡å®é™…ï¼Œè€Œä»–ä»¬è§‰å¾—ä½ å¤ªåŠŸåˆ©ã€‚" },
                strengths: ["è¶…å¼ºçš„æ‰§è¡ŒåŠ›", "ç†æ€§è§£å†³é—®é¢˜", "æŠ—å‹èƒ½åŠ›"],
                blindspots: ["å¿½ç•¥èº«ä½“ä¿¡å·", "éš¾ä»¥äº«å—å½“ä¸‹"],
                dimension: [70, 75, 75, 90, 85, 80, 65, 75]
            },
            {
                minScore: 116, maxScore: 138,
                title: "ä»å®¹æˆç†Ÿçš„ä¸­åš",
                ageRange: "å¿ƒç†å¹´é¾„ï¼š36 - 55 å²",
                description: "ç»è¿‡å²æœˆçš„æ´—ç¤¼ï¼Œä½ çš„å†…å¿ƒå¦‚ç£çŸ³èˆ¬ç¨³å›ºã€‚ä½ ä¸å†è½»æ˜“è¢«æƒ…ç»ªå·¦å³ï¼Œçœ‹é—®é¢˜æ·±åˆ»ä¸”å…¨é¢ã€‚ä½ æ˜¯å‘¨å›´äººçš„ä¾é ï¼Œè¡Œäº‹ç¨³é‡ï¼Œé¡¾å…¨å¤§å±€ã€‚ä½ æ›´çœ‹é‡é•¿è¿œçš„ä»·å€¼è€Œéçœ¼å‰çš„åˆ©ç›Šï¼Œå¯¹äºå¤æ‚çš„äººé™…å…³ç³»å¤„ç†å¾—æ¸¸åˆƒæœ‰ä½™ï¼Œç”Ÿæ´»èŠ‚å¥å°½åœ¨ä½ çš„æŒæ¡ä¹‹ä¸­ã€‚",
                traits: ["ç¨³é‡", "æ·±æ€ç†Ÿè™‘", "å¯é ", "åŸåºœ", "æŒæ§åŠ›"],
                advice: "è¿‡äºç¨³é‡æœ‰æ—¶ä¼šæ˜¾å¾—ç¼ºä¹æƒ…è¶£ï¼Œä¸å¦¨å¶å°”æ‰“ç ´ä¸€ä¸‹å¸¸è§„ï¼Œç»™ç”Ÿæ´»åˆ¶é€ ä¸€ç‚¹å°æƒŠå–œã€‚ä¿æŒå¯¹æ–°äº‹ç‰©çš„å¥½å¥‡å¿ƒï¼Œèƒ½è®©ä½ çœ‹èµ·æ¥æ›´å¹´è½»ã€‚",
                color: "linear-gradient(135deg, #34d399, #10b981)",
                matches: { archetype: "æ•™çˆ¶ / è¯¸è‘›äº®", bestPartner: "å¥‹æ–—è¿›å–çš„é’å¹´", partnerReason: "ä½ æ¬£èµä»–ä»¬çš„å†²åŠ²ï¼Œè€Œä½ çš„ç¨³é‡èƒ½å¸®ä»–ä»¬è§„é¿é£é™©ã€‚", conflict: "çƒ­è¡€æ¢ç´¢çš„å°‘å¹´", conflictReason: "å°‘å¹´çš„æƒ…ç»ªåŒ–å’Œå†²åŠ¨æœ‰æ—¶ä¼šæŒ‘æˆ˜ä½ çš„æŒæ§æ¬²ã€‚" },
                strengths: ["æƒ…ç»ªç®¡ç†å¤§å¸ˆ", "æé«˜çš„å¯é æ€§", "å…¨å±€è§†é‡"],
                blindspots: ["ç•¥æ˜¾ä¿å®ˆ", "å¯¹ä»–äººçš„é«˜æ ‡å‡†è¦æ±‚"],
                dimension: [50, 95, 90, 95, 90, 60, 80, 85]
            },
            {
                minScore: 139, maxScore: 160,
                title: "é€šé€è±è¾¾çš„æ™ºè€…",
                ageRange: "å¿ƒç†å¹´é¾„ï¼š60+ å²",
                description: "ä½ çš„å¿ƒç†å¹´é¾„å·²ç»è¾¾åˆ°äº†è¶…ç„¶çš„å¢ƒç•Œã€‚ä¸–é—´ä¸‡ç‰©åœ¨ä½ çœ¼ä¸­éƒ½å·²å›å½’æœ¬è´¨ï¼Œä½ å¾ˆå°‘ç„¦è™‘ï¼Œæ›´å¤šçš„æ˜¯åŒ…å®¹ä¸é‡Šæ€€ã€‚ä½ è¿½æ±‚å†…å¿ƒçš„å®é™ï¼Œç‰©è´¨å¯¹ä½ æ¥è¯´å·²ä¸å†æ˜¯æŸç¼šï¼Œç²¾ç¥çš„è‡ªç”±æ‰æ˜¯ç»ˆæè¿½æ±‚ã€‚ä½ çœ‹æ·¡äº†å¾—å¤±ï¼Œæ‹¥æœ‰äº†å¤§æ™ºæ…§ã€‚",
                traits: ["è±è¾¾", "æ·¡æ³Š", "æ™ºæ…§", "æ…ˆæ‚²", "å®é™"],
                advice: "ä½ çš„æ™ºæ…§æ˜¯å®è´µçš„è´¢å¯Œï¼Œèƒ½å¤ŸæŒ‡å¼•å¾ˆå¤šäººã€‚ä½†ä¹Ÿè¦æ³¨æ„ä¸è¦ä¸æ—¶ä»£å®Œå…¨è„±èŠ‚ï¼Œä¿æŒä¸å¹´è½»äººçš„äº¤æµä¼šè®©ä½ çš„æ™ºæ…§æ›´å…·æ´»åŠ›ã€‚",
                color: "linear-gradient(135deg, #c084fc, #a855f7)",
                matches: { archetype: "é‚“å¸ƒåˆ©å¤š / å°¤è¾¾å¤§å¸ˆ", bestPartner: "å¤©çœŸçƒ‚æ¼«çš„å­©ç«¥", partnerReason: "ä¸€è€ä¸€å°‘ï¼Œå›å½’æœ¬çœŸçš„å¿«ä¹ï¼Œå½¼æ­¤éƒ½èƒ½åœ¨å¯¹æ–¹èº«ä¸Šçœ‹åˆ°çº¯ç²¹ã€‚", conflict: "å¥‹æ–—è¿›å–çš„é’å¹´", conflictReason: "ä»–ä»¬çš„ç„¦è™‘å’Œå¿™ç¢Œåœ¨ä½ çœ‹æ¥æ˜¯æ²¡æœ‰å¿…è¦çš„è‡ªæˆ‘æŠ˜ç£¨ã€‚" },
                strengths: ["æé«˜çš„è‡ªæˆ‘æ¥çº³", "çœ‹é€æœ¬è´¨çš„æ™ºæ…§", "å®½å¹¿çš„èƒ¸æ€€"],
                blindspots: ["å¯èƒ½æ˜¾å¾—ç–ç¦»", "å¯¹ä¸–ä¿—æˆåŠŸçš„æ¼ è§†"],
                dimension: [40, 100, 95, 80, 95, 50, 100, 100]
            }
        ];

        // åº”ç”¨çŠ¶æ€
        let currentQuestionIndex = 0;
        let answers = {};
        let totalScore = 0;
        let actualAge = 20;
        let chartInstance = null;

        const pages = {
            start: document.getElementById('page-start'),
            birth: document.getElementById('page-birth'),
            quiz: document.getElementById('page-quiz'),
            result: document.getElementById('page-result')
        };
        const btnStart = document.getElementById('btn-start');
        const btnSubmitBirth = document.getElementById('btn-submit-birth');
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');
        const btnRestart = document.getElementById('btn-restart');
        const btnShare = document.getElementById('btn-share');
        const progressFill = document.getElementById('progress-fill');
        const currentQSpan = document.getElementById('current-q');
        const totalQSpan = document.getElementById('total-q');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');

        // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©
        function initDateInputs() {
            const yearSel = document.getElementById('input-year');
            const monthSel = document.getElementById('input-month');
            const daySel = document.getElementById('input-day');
            const currentYear = new Date().getFullYear();
            for (let i = 0; i < 80; i++) {
                const y = currentYear - i - 5;
                const opt = document.createElement('option');
                opt.value = y;
                opt.text = y;
                yearSel.add(opt);
            }
            yearSel.value = 2000;
            for (let i = 1; i <= 12; i++) {
                const opt = document.createElement('option');
                opt.value = i;
                opt.text = i + 'æœˆ';
                monthSel.add(opt);
            }
            const updateDays = () => {
                const y = parseInt(yearSel.value);
                const m = parseInt(monthSel.value);
                const daysInMonth = new Date(y, m, 0).getDate();
                daySel.innerHTML = '';
                for (let i = 1; i <= daysInMonth; i++) {
                    const opt = document.createElement('option');
                    opt.value = i;
                    opt.text = i + 'æ—¥';
                    daySel.add(opt);
                }
            };
            yearSel.addEventListener('change', updateDays);
            monthSel.addEventListener('change', updateDays);
            updateDays();
        }

        function showPage(pageId) {
            Object.values(pages).forEach(p => p.classList.remove('active'));
            pages[pageId].classList.add('active');
        }

        function saveAnswers() {
            localStorage.setItem('psycheAnswers', JSON.stringify(answers));
        }
        function loadAnswers() {
            const saved = localStorage.getItem('psycheAnswers');
            if (saved) {
                try {
                    answers = JSON.parse(saved);
                } catch { answers = {}; }
            } else {
                answers = {};
            }
        }

        function renderQuestion() {
            const q = QUESTIONS[currentQuestionIndex];
            currentQSpan.textContent = `Question ${currentQuestionIndex + 1}`;
            totalQSpan.textContent = `${QUESTIONS.length} total`;
            progressFill.style.width = `${((currentQuestionIndex + 1) / QUESTIONS.length) * 100}%`;
            questionText.textContent = q.text;
            optionsContainer.innerHTML = '';
            q.options.forEach((opt, idx) => {
                const div = document.createElement('div');
                div.className = 'option-item';
                if (answers[q.id] === idx) div.classList.add('selected');
                div.textContent = opt.text;
                div.addEventListener('click', () => selectOption(idx));
                optionsContainer.appendChild(div);
            });
            btnPrev.disabled = currentQuestionIndex === 0;
        }

        function selectOption(optIdx) {
            const q = QUESTIONS[currentQuestionIndex];
            answers[q.id] = optIdx;
            saveAnswers();
            if (currentQuestionIndex < QUESTIONS.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                calculateResult();
            }
        }

        btnPrev.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        });

        btnNext.addEventListener('click', () => {
            const q = QUESTIONS[currentQuestionIndex];
            if (answers[q.id] === undefined) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé€‰é¡¹');
                return;
            }
            if (currentQuestionIndex < QUESTIONS.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                calculateResult();
            }
        });

        function calculateResult() {
            let score = 0;
            for (let q of QUESTIONS) {
                const ansIdx = answers[q.id];
                if (ansIdx !== undefined) {
                    score += q.options[ansIdx].score;
                }
            }
            totalScore = score;

            // æŸ¥æ‰¾åŒ¹é…çš„ç»“æœç±»å‹
            const result = RESULTS.find(r => score >= r.minScore && score <= r.maxScore) || RESULTS[RESULTS.length-1];
            console.log('åŒ¹é…ç»“æœ:', result.title, 'åˆ†æ•°:', score); // è°ƒè¯•ç”¨

            // è®¡ç®—å¿ƒç†å¹´é¾„
            let psychAge;
            if (score <= 69) psychAge = Math.round(6 + ((score-40)/(69-40))*(12-6));
            else if (score <= 92) psychAge = Math.round(13 + ((score-70)/(92-70))*(19-13));
            else if (score <= 115) psychAge = Math.round(20 + ((score-93)/(115-93))*(35-20));
            else if (score <= 138) psychAge = Math.round(36 + ((score-116)/(138-116))*(55-36));
            else psychAge = Math.round(60 + ((score-139)/(160-139))*(80-60));

            // æ¸²æŸ“ç»“æœé¡µ
            showPage('result');
            document.getElementById('psych-age').textContent = psychAge;
            document.getElementById('actual-age').textContent = actualAge;
            const diff = psychAge - actualAge;
            const diffEl = document.getElementById('age-diff');
            if (Math.abs(diff) <= 2) diffEl.textContent = "ä½ çš„èº«å¿ƒå¹´é¾„å®Œç¾å¥‘åˆï¼ŒçŸ¥è¡Œåˆä¸€ã€‚";
            else if (diff > 0) diffEl.textContent = `ä½ çš„å†…å¿ƒæ¯”å®é™…å¹´é¾„æˆç†Ÿ ${diff} å²ï¼Œæ‹¥æœ‰è¶…é¾„çš„ç¨³é‡ã€‚`;
            else diffEl.textContent = `ä½ çš„å†…å¿ƒæ¯”å®é™…å¹´é¾„å¹´è½» ${-diff} å²ï¼Œä¿ç•™ç€çè´µçš„æ´»åŠ›ã€‚`;

            // åŠ¨æ€è®¾ç½®æ‰€æœ‰ result ç›¸å…³å­—æ®µ
            document.getElementById('result-type').textContent = result.title;
            document.getElementById('result-age-range').textContent = result.ageRange;
            document.getElementById('banner-title').textContent = result.title;
            document.getElementById('result-desc').textContent = result.description;
            document.getElementById('result-banner').style.background = result.color;
            document.getElementById('advice-text').textContent = result.advice;
            document.getElementById('total-score').textContent = score;

            // å…³é”®è¯æ ‡ç­¾
            const traitsContainer = document.getElementById('traits-container');
            traitsContainer.innerHTML = '';
            result.traits.forEach(t => {
                const span = document.createElement('span');
                span.className = 'trait';
                span.textContent = '#' + t;
                traitsContainer.appendChild(span);
            });

            // ä¼˜åŠ¿/ç›²ç‚¹
            const strengthsList = document.getElementById('strengths-list');
            strengthsList.innerHTML = '';
            result.strengths.forEach(s => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.textContent = s;
                strengthsList.appendChild(li);
            });
            const blindspotsList = document.getElementById('blindspots-list');
            blindspotsList.innerHTML = '';
            result.blindspots.forEach(b => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.textContent = b;
                blindspotsList.appendChild(li);
            });

            // ç»´åº¦ç½‘æ ¼
            const dimGrid = document.getElementById('dimension-grid');
            dimGrid.innerHTML = '';
            const dimData = result.dimension;
            const dimLabels = result.dimensionLabels;
            for (let i = 0; i < dimLabels.length; i++) {
                const val = dimData[i];
                const div = document.createElement('div');
                div.className = 'dimension-item';
                div.innerHTML = `
                    <div class="dimension-name">${dimLabels[i]}</div>
                    <div class="dimension-bar-bg"><div class="dimension-fill" style="width: ${val}%"></div></div>
                    <div class="dimension-value">${val}/100</div>
                `;
                dimGrid.appendChild(div);
            }

            // ç¤¾äº¤åŒ¹é…
            document.getElementById('archetype').textContent = result.matches.archetype;
            document.getElementById('partner').textContent = result.matches.bestPartner;
            document.getElementById('partner-reason').textContent = result.matches.partnerReason;
            document.getElementById('conflict').textContent = result.matches.conflict;
            document.getElementById('conflict-reason').textContent = result.matches.conflictReason;

            // å»¶è¿Ÿä¸€ç‚¹ç»˜åˆ¶é›·è¾¾å›¾ï¼Œç¡®ä¿canvaså·²å®Œå…¨æ¸²æŸ“
            setTimeout(() => {
                try {
                    if (chartInstance) chartInstance.destroy();
                    const ctx = document.getElementById('radar-chart').getContext('2d');
                    if (ctx) {
                        chartInstance = new Chart(ctx, {
                            type: 'radar',
                            data: {
                                labels: dimLabels,
                                datasets: [{
                                    label: result.title,
                                    data: dimData,
                                    backgroundColor: 'rgba(249, 115, 22, 0.2)',
                                    borderColor: '#f97316',
                                    pointBackgroundColor: '#f97316',
                                    pointBorderColor: '#fff',
                                    pointHoverBackgroundColor: '#fff',
                                    pointHoverBorderColor: '#f97316'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: { r: { beginAtZero: true, max: 100, ticks: { stepSize: 20 } } },
                                plugins: { legend: { display: false } }
                            }
                        });
                    } else {
                        console.error('Canvas context not found');
                    }
                } catch (e) {
                    console.error('é›·è¾¾å›¾ç»˜åˆ¶å¤±è´¥:', e);
                }
            }, 100);
        }

        btnRestart.addEventListener('click', () => {
            localStorage.removeItem('psycheAnswers');
            answers = {};
            currentQuestionIndex = 0;
            showPage('start');
        });

        btnShare.addEventListener('click', () => {
            if (navigator.share) {
                navigator.share({
                    title: 'æˆ‘çš„å¿ƒç†å¹´é¾„æµ‹è¯•ç»“æœ',
                    text: `æˆ‘çš„å®é™…å¹´é¾„${actualAge}å²ï¼Œä½†å¿ƒç†å¹´é¾„æ˜¯${document.getElementById('psych-age').textContent}å²ï¼ä½ ä¹Ÿæ¥è¯•è¯•å§ï¼`,
                    url: window.location.href,
                }).catch(console.error);
            } else {
                alert('æˆªå›¾åˆ†äº«ä½ çš„ç»“æœå§ï¼');
            }
        });

        btnStart.addEventListener('click', () => {
            loadAnswers();
            showPage('birth');
        });

        btnSubmitBirth.addEventListener('click', () => {
            const year = parseInt(document.getElementById('input-year').value);
            const month = parseInt(document.getElementById('input-month').value);
            const day = parseInt(document.getElementById('input-day').value);
            const today = new Date();
            let age = today.getFullYear() - year;
            const m = today.getMonth() + 1 - month;
            if (m < 0 || (m === 0 && today.getDate() < day)) age--;
            actualAge = age;
            currentQuestionIndex = 0;
            showPage('quiz');
            renderQuestion();
        });

        initDateInputs();
    </script>
</body>
</html>